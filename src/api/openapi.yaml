openapi: 3.0.0
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: Financial tracking API documentation.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: FinTrack API
  version: "1.0"
paths:
  /accounts:
    get:
      description: list accounts by tenant ID
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/dto.AccountResponse"
                type: array
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: List accounts
      tags:
        - accounts
    post:
      description: create a new account
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.CreateAccountRequest"
        description: Create account
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.AccountResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Create an account
      tags:
        - accounts
  "/accounts/{id}":
    delete:
      description: delete an account by ID
      parameters:
        - description: Account ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Delete an account
      tags:
        - accounts
    get:
      description: get account by ID
      parameters:
        - description: Account ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.AccountResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Get an account
      tags:
        - accounts
    put:
      description: update an existing account (cannot change type or currency)
      parameters:
        - description: Account ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.UpdateAccountRequest"
        description: Update account
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.AccountResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Update an account
      tags:
        - accounts
  /auth/login:
    post:
      description: Login with username and password
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                username:
                  description: Username
                  type: string
                password:
                  description: Password
                  type: string
              required:
                - username
                - password
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.AuthResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      summary: Login
      tags:
        - auth
  /auth/refresh-token:
    post:
      description: Refresh access token using refresh token
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.RefreshTokenRequest"
        description: Refresh Token Request
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.AuthResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      summary: Refresh access token
      tags:
        - auth
  /auth/register:
    post:
      description: Register a new user with full name, email and password
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.RegisterRequest"
        description: Register User
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.AuthResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      summary: Register a new user
      tags:
        - auth
  /categories:
    get:
      description: Get all categories for the authenticated user's tenant
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/dto.CategoryResponse"
                type: array
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: List categories
      tags:
        - categories
    post:
      description: Create a new category for the authenticated user's tenant
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.CreateCategoryRequest"
        description: Create Category Request
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.CategoryResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Create category
      tags:
        - categories
  "/categories/{id}":
    delete:
      description: Soft Delete a category
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Category ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "204":
          description: No Content
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Delete category
      tags:
        - categories
    get:
      description: Get a category by its ID
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Category ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.CategoryResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Get category
      tags:
        - categories
    put:
      description: Update an existing category
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Category ID
          in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.UpdateCategoryRequest"
        description: Update Category Request
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.CategoryResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Update category
      tags:
        - categories
  /tags:
    get:
      description: Get all tags for the authenticated user's tenant
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/dto.TagResponse"
                type: array
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: List tags
      tags:
        - tags
    post:
      description: Create a new tag for the authenticated user's tenant
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.CreateTagRequest"
        description: Create Tag Request
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.TagResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Create tag
      tags:
        - tags
  "/tags/{id}":
    delete:
      description: Soft Delete a tag
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Tag ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "204":
          description: No Content
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Delete tag
      tags:
        - tags
    get:
      description: Get a tag by its ID
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Tag ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.TagResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Get tag
      tags:
        - tags
    put:
      description: Update an existing tag
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Tag ID
          in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.UpdateTagRequest"
        description: Update Tag Request
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.TagResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Update tag
      tags:
        - tags
  /tenants:
    post:
      description: Create a new tenant (workspace) and links the creator to it.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.CreateTenantRequest"
        description: Create tenant
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.TenantResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Create a new tenant
      tags:
        - tenants
  /transactions:
    get:
      description: Lists transactions for the tenant, optionally filtered.
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Accrual Month (YYYYMM)
          in: query
          name: accrual_month
          schema:
            type: string
        - description: Account ID
          in: query
          name: account_id
          schema:
            type: string
        - description: Transaction Type
          in: query
          name: transaction_type
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/dto.TransactionResponse"
                type: array
        "400":
          description: Invalid query params
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - AuthPassword: []
      summary: List transactions
      tags:
        - transactions
    post:
      description: Creates a new transaction for the authenticated user's tenant.
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
      requestBody:
        $ref: "#/components/requestBodies/dto.CreateTransactionRequest"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.TransactionResponse"
        "400":
          description: Invalid input
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - AuthPassword: []
      summary: Create a new transaction
      tags:
        - transactions
  "/transactions/{id}":
    delete:
      description: Soft-deletes a transaction by ID.
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Transaction ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "204":
          description: No Content
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - AuthPassword: []
      summary: Delete a transaction
      tags:
        - transactions
    get:
      description: Retrieves a transaction by its ID.
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Transaction ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.TransactionResponse"
        "404":
          description: Transaction not found
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - AuthPassword: []
      summary: Get transaction by ID
      tags:
        - transactions
    put:
      description: Updates a transaction by ID.
      parameters:
        - description: Tenant ID
          in: header
          name: X-Tenant-ID
          required: true
          schema:
            type: string
        - description: Transaction ID
          in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        $ref: "#/components/requestBodies/dto.CreateTransactionRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.TransactionResponse"
        "400":
          description: Invalid input
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - AuthPassword: []
      summary: Update a transaction
      tags:
        - transactions
  /users/profile:
    get:
      description: Get the profile of the authenticated user
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.UserResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Get user profile
      tags:
        - users
    put:
      description: Update the profile of the authenticated user
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dto.UpdateUserRequest"
        description: Update User Request
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dto.UserResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: Update user profile
      tags:
        - users
  /users/tenants:
    get:
      description: Get the tenants of the authenticated user
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/dto.UserTenantResponse"
                type: array
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/handler.ErrorResponse"
      security:
        - AuthPassword: []
      summary: List user tenants
      tags:
        - users
components:
  requestBodies:
    dto.CreateTransactionRequest:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/dto.CreateTransactionRequest"
      description: Transaction data
      required: true
  securitySchemes:
    AuthPassword:
      type: oauth2
      flows:
        password:
          tokenUrl: /auth/login
          scopes: {}
  schemas:
    domain.AccountType:
      enum:
        - bank
        - cash
        - credit_card
        - investment
        - other
      type: string
      x-enum-varnames:
        - AccountTypeBank
        - AccountTypeCash
        - AccountTypeCreditCard
        - AccountTypeInvestment
        - AccountTypeOther
    domain.TransactionType:
      enum:
        - credit
        - debit
        - transfer
        - payment
      type: string
      x-enum-varnames:
        - TransactionTypeCredit
        - TransactionTypeDebit
        - TransactionTypeTransfer
        - TransactionTypePayment
    dto.AccountResponse:
      properties:
        color:
          type: string
        created_at:
          type: string
        currency:
          type: string
        icon:
          type: string
        id:
          type: string
        initial_balance:
          type: number
        name:
          type: string
        tenant_id:
          type: string
        type:
          $ref: "#/components/schemas/domain.AccountType"
        updated_at:
          type: string
      type: object
    dto.AuthResponse:
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        user:
          $ref: "#/components/schemas/dto.User"
      type: object
    dto.CategoryResponse:
      properties:
        color:
          type: string
        created_at:
          type: string
        created_by:
          type: string
        icon:
          type: string
        id:
          type: string
        name:
          type: string
        parent_category_id:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        updated_by:
          type: string
      type: object
    dto.CreateAccountRequest:
      properties:
        color:
          type: string
        currency:
          type: string
        icon:
          type: string
        initial_balance:
          type: number
        name:
          type: string
        type:
          $ref: "#/components/schemas/domain.AccountType"
      required:
        - name
        - type
      type: object
    dto.CreateCategoryRequest:
      properties:
        color:
          type: string
        icon:
          type: string
        name:
          type: string
        parent_category_id:
          type: string
      required:
        - name
      type: object
    dto.CreateTagRequest:
      properties:
        name:
          type: string
      required:
        - name
      type: object
    dto.CreateTenantRequest:
      properties:
        name:
          type: string
      required:
        - name
      type: object
    dto.CreateTransactionRequest:
      properties:
        accrual_month:
          description: YYYYMM
          type: string
        amount:
          type: number
        category_id:
          type: string
        comments:
          type: string
        due_date:
          type: string
        from_account_id:
          type: string
        installments:
          minimum: 1
          type: integer
        is_recurring:
          type: boolean
        payment_date:
          type: string
        tag_ids:
          items:
            type: string
          type: array
        to_account_id:
          type: string
        transaction_type:
          allOf:
            - $ref: "#/components/schemas/domain.TransactionType"
          enum:
            - credit
            - debit
            - transfer
            - payment
      required:
        - accrual_month
        - amount
        - category_id
        - due_date
        - from_account_id
        - transaction_type
      type: object
    dto.RefreshTokenRequest:
      properties:
        refresh_token:
          type: string
      required:
        - refresh_token
      type: object
    dto.RegisterRequest:
      properties:
        email:
          type: string
        full_name:
          type: string
        password:
          minLength: 6
          type: string
      required:
        - email
        - full_name
        - password
      type: object
    dto.TagResponse:
      properties:
        created_at:
          type: string
        created_by:
          type: string
        deactivated_at:
          type: string
        id:
          type: string
        name:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        updated_by:
          type: string
      type: object
    dto.TenantResponse:
      properties:
        created_at:
          type: string
        id:
          type: string
        name:
          type: string
        updated_at:
          type: string
      type: object
    dto.TransactionResponse:
      properties:
        accrual_month:
          type: string
        amount:
          type: number
        category_id:
          type: string
        comments:
          type: string
        created_at:
          type: string
        created_by:
          type: string
        currency:
          type: string
        deactivated_at:
          type: string
        deactivated_by:
          type: string
        due_date:
          type: string
        from_account_id:
          type: string
        id:
          type: string
        parent_transaction_id:
          type: string
        payment_date:
          type: string
        tenant_id:
          type: string
        to_account_id:
          type: string
        transaction_type:
          $ref: "#/components/schemas/domain.TransactionType"
        updated_at:
          type: string
        updated_by:
          type: string
      type: object
    dto.UpdateAccountRequest:
      properties:
        color:
          type: string
        icon:
          type: string
        initial_balance:
          type: number
        name:
          type: string
      required:
        - name
      type: object
    dto.UpdateCategoryRequest:
      properties:
        color:
          type: string
        icon:
          type: string
        name:
          type: string
        parent_category_id:
          type: string
      required:
        - name
      type: object
    dto.UpdateTagRequest:
      properties:
        name:
          type: string
      required:
        - name
      type: object
    dto.UpdateUserRequest:
      properties:
        email:
          type: string
        name:
          type: string
      required:
        - email
        - name
      type: object
    dto.User:
      properties:
        email:
          type: string
        id:
          type: string
      type: object
    dto.UserResponse:
      properties:
        created_at:
          type: string
        email:
          type: string
        id:
          type: string
        name:
          type: string
        updated_at:
          type: string
      type: object
    dto.UserTenantResponse:
      properties:
        name:
          type: string
        tenant_id:
          type: string
      type: object
    handler.ErrorResponse:
      properties:
        error:
          type: string
      type: object
